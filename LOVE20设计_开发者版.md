# 0. 什么是 LOVE20 协议

LOVE20 协议是一个基于 LP 治理权和社群共同见证的去中心化社群铸币协议。

希望能够通过这个协议，鼓励每个人，能够每天做 20 分钟自己真正喜欢的事情，以此获得精神上和物质上的富足。

# 1. 部署

- 资格
  - 首个代币：合约部署时自动创建
  - 非首个代币：父币有提案权的治理者
- 名称
  - 大写英文字母、数字
  - 开头不可以是数字
  - 必须是 6 个字符
- 父币
  - 除首个代币合约外，其余所有代币合约的父币，必须是协议所创建的代币
- 分配
  - 铸造 10%用于公平发射（合约创建时就铸造）
  - 预留 90%用于治理激励（激励领取时才被铸造，且只有治理合约有权力发起铸造且累计铸造不可超过预留的数量）

# 2. 公平发射（代币总量 10%）

- 申购铸造（10%）
  - 价格：按募集父币的目标量计算价格
  - 数量：不限
  - 结束：每一次申购都触发判定，若同时满足下面两个条件，则此申购后结束公平发射
    - 数量判定：累计申购额大于等于募资数量要求
    - 时间判定：从达成 50%最低募资数量开始计算持续时间，达到持续时间要求
  - 领取：申购结束后按申购额占比计算份额，扣除消耗的父币，领取剩余父币与申购到的代币
  - 底池：所有募资到的父币由合约永久保管
- 底池返还：
  - 可返还父币数量：申购时所消耗的父币数量
  - 需销毁代币数量：申购时的额度占比 \* 代币当前发行量
    - 当前代币发行量
      - 包含：公平发射的所有代币（含未领取的）、治理奖励已领取的代币
      - 不含：底池返还已退回的代币，自己主动销毁的代币
- 无偿销毁：
  - 若公平发射结束后，直接通过代币合约直接销毁，则无父币返还，销毁的代币将补充到未来总激励

# 3. 治理（代币总量 45%）

公平发射后，自动进入社区治理挖矿，每一轮由 3 个相同时间长度的环节依次组成：

- 提案投票轮（治理者）：决定当前轮次挖矿提案
- 挖矿轮（持币人）：参与自己心仪的提案挖矿活动中
- 验证轮（治理者）：验证抽取出的挖矿矿工活动，进行挖矿激励；同时参与验证的治理者也同时可领取治理激励

且每个环节当前轮结束后，立即当轮的下一个环节及同环节的下一轮：

| 轮次    | r1          | r2          | r3        | r4          | r5   | r6   |
| ------- | ----------- | ----------- | --------- | ----------- | ---- | ---- |
| 第 1 轮 | 提案 + 投票 | 挖矿        | 验证      |
| 第 2 轮 |             | 提案 + 投票 | 挖矿      | 验证        |
| 第 3 轮 |             |             | 提案+投票 | 挖矿        | 验证 |
| 第 4 轮 |             |             |           | 提案 + 投票 | 挖矿 | 验证 |

### 3.1 资格

- 加入：获得治理者资格，需与父币组 LP 后，选择承诺释放期并质押，计算治理票数：LP 数量乘以释放期倍数，最小 1 代表 4 周后释放，最大 3 代表 12 周后释放，后续追加 LP 质押，则承诺释放期只增不减
- 加成：质押代币，可获得提升激励倍数，最高不超过 3 倍
- 退出：提交质押资产（LP 和代币）解除请求，在承诺释放期后，可自行领取之前质押的资产

### 3.2 权力

- 环节：提案与投票（第 1~7 天）

  - 候选挖矿提案（第 1~3 天）

    - 参与条件：
      - 有提案权的地址：持有不少于 0.5%的治理票
      - 每轮只可将一个提案加入候选（新增提案或延续提案）
    - 新增提案：
      - 资格类
        - 质押上限：
        - 地址限定：填写合约白名单地址
          - 不填写：任何地址都可以参与
          - 填写：合约需包含 isValidAddress 函数，提供：地址、轮次、提案 id，返回地址是否可参与挖矿
      - 内容类
        - 标题
        - 内容：
      - 验证类
        - 验证数量：每轮随机抽取多少钱包地址验证并奖励
        - 验证信息填写指引：例如：必须填写公开验证地址，且地址必须是社交平台账号或个人主页地址链接
        - 验证规则：例如：发推文包含“$代币名称”，满 5 天给 10 分，每少一天减 3 分，没有则 0 分
    - 延续提案：激活过去已有提案

  - 治理者投票：（第 4~7 天）
    - 多选投票：从候选挖矿提案中，选择 1 个或多个提案投票

- 环节：社群共同验证（第 15~21 天）
  - 获取待验证地址：若无矿工参与，则无地址产生
  - 提交验证结果：传入一个数字和一个数组，前者代表弃权权重，后者按验证标准，为每个随机验证地址分配验证权重，弃权票按比例将奖励返还给国库，其余按权重分配验证票数，总票数等同于对此提案的投票数。

### 3.3 治理激励

- 份额：总激励的 50%
- 构成：治理激励分两部分激励构成，各占 50%，权重计算如下
  - 投票激励 V：行使验证权的治理票数 / 总行使验证权的比例
  - 质押激励 S：质押代币数量 / 总质押代币数量
- 溢出：
  - 质押激励 S 超过投票激励 V 2 倍以上的部分，为溢出激励，溢出部分在领取时，自动归入国库
- 时间：验证轮结束

# 4. 挖矿（代币总量 45%）

## 4.1 资格

- 加入：当前挖矿轮进行到 90% 前都可加入
  - 质押：代币
  - 填写：验证信息：根据提案的验证信息填写指引填写，帮助验证者验证挖矿人及挖矿行为，往往填写的是社交平台的账号地址或个主页地址
  - 填写：连续参加几轮
- 退出：参加轮次结束后，则质押代币可随时领取

## 4.2 权力

- 环节：挖矿（第 8~14 天）
  - 根据当轮最新的提案要求，完成挖矿任务

## 4.3 激励

- 总激励：本轮激励的 50%
  - 提案激励：验证票数不少于本轮验证票的 5%的提案有参与提案激励的资格，具体为：本轮总挖矿奖励 \* 当前提案获得验证票数 / 满足资格的提案的总验证票数
  - 弃权结余：追溯前面轮次此提案的弃权票对应激励
- 个体
  - 资格：被选中随机验证的地址
  - 数量：所获得的验证者投票数占总验证票数的比例 \* 总激励
- 时间：在验证结束后，可领取本轮挖矿奖励

# 5. 特殊情况

## 5.1 每轮首个领取激励的地址

- 预留准备： 计算并存储本轮预留的激励，计算公式：1%国库 \* （1 - 弃权票占比）
  - 1%国库：作为本轮治理和挖矿基础激励
  - 弃权票占比：在所有参与激励的提案中，弃权票的比例

## 5.2 每个提案的首轮验证的治理者

- 验证地址准备：根据当前验证轮次的随机数种子，生成本轮需验证的地址

## 5.3 首个代币的验证者地址

- 随机数种子更新：首个代币的达到 0.05%治理权的验证者地址验证时，验证者地址与上一个随机数种子加当前区块高度的哈希值作为本轮最新的随机数种子的值
- 首轮随机数：验证合约地址

# 6. 名词解释
