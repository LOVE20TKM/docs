# 0. 什么是 LOVE20 协议

LOVE20 协议是一个基于 LP 治理权和可验证共识行动的去中心化社群铸币协议。
LOVE20 protocol is a decentralized community token minting protocol based on LP governance rights and verifiable consensus action.

希望能够通过这个协议，鼓励每个人，能够每天做 20 分钟自己真正喜欢的生活，以此获得精神上和物质上的富足。

# 1. 部署

- 资格
  - 首个代币：合约部署时自动创建
  - 后续代币：父币有提案权的治理者
- 名称
  - 大写英文字母、数字
  - 开头不可以是数字
  - 必须是 6 个字符
- 父币
  - 除首个代币合约外，其余所有代币合约的父币，必须是协议所创建的代币
- 分配
  - 铸造 10%用于公平发射（合约创建时就铸造）
  - 预留 90%用于治理激励（激励领取时才被铸造）

# 2. 公平发射（代币总量 10%）

- 申购铸造（10%）
  - 价格：按募集父币的目标量计算价格
  - 数量：不限，允许超额申购
  - 结束：每一次申购都触发判定，若同时满足下面两个条件，则结束公平发射
    - 数量判定：累计申购额大于等于募资数量要求
    - 时间判定：从首笔达成 50%最低募资数量开始计算持续时间，达到持续时间要求
- 申购撤回
  - 时间：申购结束前
  - 数量：申购数量
  - 返还：返还申购的父币
  - 税点：起始税点 50%，随时间推移逐步减少直至降为 0%，收取的税点将转到代币合约补充底池
- 申购领取
  - 份额：申购结束后按申购额占比计算份额
  - 扣除：扣除消耗的父币
  - 返还：返还剩余父币
  - 领取：领取申购到的代币
- 底池销毁：
  - 发射结束后，募集到的父币自动转到代币合约作为底池，销毁代币，将返还同比例的底池父币，比例计算为：销毁代币数量 / 已铸造代币量
- 无偿销毁：
  - 销毁的代币将补充到未来总激励

# 3. 治理即挖矿（代币总量 45%）

## 3.0 概念

### 3.0.1 可验证的共识行动(VCA)

公平发射后，进入社区治理，社区治理围绕可验证的共识行动进行，后续将可验证的共识行动简写为 VCA，对应 Verifiable Consensus Action 的首字母缩写。

### 3.0.2 治理周期与环节轮次(Round)

每一个完整的治理周期由 3 个相同时间长度的环节轮依次组成：

- 投票轮（治理者）：投票决定本周期的可验证共识行动
- 行动轮（持币人）：报名参与本周期可验证的共识行动
- 验证轮（治理者）：验证本周期随机抽取地址共识行动

一个治理周期结束后，被验证的地址和参与治理的地址可领取此治理周期的行动激励与治理激励。

前后治理轮的关系为，每个环节当前轮结束后，立即当轮的下一个环节及同环节的下一轮，如下：

| 治理周期/轮次 | r1   | r2   | r3   | r4   | r5   | r6   |
| ------------- | ---- | ---- | ---- | ---- | ---- | ---- |
| 第 1 周期     | 投票 | 行动 | 验证 |
| 第 2 周期     |      | 投票 | 行动 | 验证 |
| 第 3 周期     |      |      | 投票 | 行动 | 验证 |
| 第 4 周期     |      |      |      | 投票 | 行动 | 验证 |

### 3.1 资格

- 治理票数：通过流动性质押，即同时质押代币与父币资产对，并承诺释放间隔轮次，获得治理票数，参与投票与验证，可获取验证激励，后续可随时质押更多的资产对获得更多治理票数，质押后会获得 sl 类（staked Liquidity）代币作为质押凭证，质押的资产将自动添加到由协议自动部署的 uniswapV2 合约的流动性池增加流动性，治理票数计算公式：承诺释放间隔轮次 \* sl 质押凭证代币数量，其中承诺释放间隔轮次不小于 4 轮且不大于 12 轮
- 奖励提升：单独质押代币可获得激励提升（质押激励），但提升最高不超过 2 倍的验证激励，同时获得 st 类（staked Token）代币作为质押代币的凭证
- 释放间隔：每次质押，都需指定承诺释放间隔轮次（最小 4 轮，最大 12 轮）, 且不小于之前的承诺释放间隔轮次
- 质押释放：提交质押资产（资产对 和代币）释放请求，并收回质押资产凭证（sl 与 st），在经过完整的承诺间隔轮次后，可自行领取质押的资产。
- 资产数量：资产对的释放，会按照 uniswapV2 的 x\*y=k 公式，基于当前流动池内价格，计算两种资产的释放数量，若价格与质押时相同，则与质押时的资产数相同；代币的质押释放与质押时的代币数量相同
- 收益分配：在取回资产对时，会将此资产对产生的流动性收益，用来增加父币底池和销毁代币增加未来的治理与行动激励

### 3.2 权力

- 环节：投票轮（第 1~7 天）

  - 质押获取治理权

    - 质押流动性（提供代币与父币） 获得治理权，当前如果有申请释放的流动性，则需先取回，再质押
    - 质押代币：提升验证激励
    - 行使治理权时，需持有完整数量的质押资产凭证：SL 类(流动性质押)、ST 类(代币质押)

  - VCA 提案推举：

    - 资格获取：持有不少于 0.5%的治理票
    - 推举限制：每轮只可推举一个提案
    - 推举方式

      - 推举老 VCA 提案：从所有本轮未被提交的提案中，选取一个提交到本轮进行投票，默认自己所有票都会投给这个提案
      - 推举新 VCA 提案：增加一个新提案并推举到本轮

        - 内容类

          - 行动：一句话描述的行动内容
          - 共识：一句话描述基于的共识

        - 资格类

          - 质押上限：
          - 白名单：填写可参与行动的地址数组，不填写表示不限制

        - 验证类

          - 验证数量：每轮随机抽取多少钱包地址验证并奖励
          - 验证规则：详细的行动要求，例如：发推文包含“$代币名称”，满 5 天给 10 分，每少一天减 3 分，没有则 0 分
          - 数组：涉及到的验证信息对应的 key：例如：url、xxxx
          - 数组：设计到的验证信息 key 对应的填写指引：例如：社交平台个人主页地址链接，xxxx 等

  - VCA 提案投票：从本轮已推举出的 VCA 提案中，选择 1 个或多个提案投票

- 环节：验证轮（第 15~21 天）
  - 获取待验证地址：若无人参与，则无地址产生
  - 提交验证结果：传入一个数字和一个数组，前者代表弃权权重，后者按验证标准，为每个随机验证地址分配验证权重，弃权票按比例将奖励返还给国库，其余按权重分配验证票数，总票数等同于对此提案的投票数。

### 3.3 治理激励

- 份额：总激励的 50%
- 构成：治理激励分两部分激励构成，各占 50%，权重计算如下
  - 验证激励 V：行使验证权的治理票数 / 总行使验证权的比例
  - 增益激励 S：质押代币数量 / 总质押代币数量
- 溢出：
  - 增益激励 S 超过投票激励 V 2 倍以上的部分，为溢出激励，溢出部分在领取时，自动销毁，归入国库
- 时间：验证轮结束

# 4. 行动即挖矿（代币总量 45%）

## 4.1 资格

- 加入：当前行动轮进行到 99% 前都可加入
  - 追加：随时可追加代币，并当轮生效
  - 填写：验证信息：根据 VCA 提案的验证信息填写指引填写所涉及到的验证信息（按 key 来填写），帮助验证者验证你的行动，往往填写的是社交平台的账号地址或个主页地址
- 退出：返回此行动累计参与的所有代币，并放弃所有激励（如果之前的轮次有激励，请先领取激励后，再退出，避免激励被销毁）

## 4.2 权力

- 环节：行动轮（第 8~14 天）
  - 根据参与的 VCA 提案要求，完成行动

## 4.3 激励

- 总激励：本轮激励的 50%
  - 提案激励：验证票数不少于本轮提案投票环节总票数的 5%的提案有参与提案激励的资格，具体为：本轮总行动奖励 \* 当前提案获得验证票数 / 满足资格的提案的总验证票数
  - 弃权结余：追溯前面轮次此提案的弃权票对应激励
- 个体
  - 资格：被选中随机验证的地址
  - 数量：所获得的验证者投票数占总验证票数的比例 \* 总激励
- 时间：在验证结束后，可领取本轮行动激励

# 5. 特殊情况

## 5.1 每轮首个领取激励的地址

- 预留准备： 计算并存储本轮预留的激励，计算公式：1%国库 \* （1 - 弃权票占比）
  - 1%国库：作为本轮治理和挖矿基础激励
  - 弃权票占比：在所有参与激励的提案中，弃权票的比例

## 5.2 验证地址准备

- 触发时机：验证、参与、撤回时，验证轮待验证的地址若还未生成，则会触发生成
- 地址数量：不超过最大地址数，为了生成效率，有可能生成数量少于最大地址数

## 5.3 随机数更新

- 初始随机数生成：随机数合约地址加部署时的区块高度
- 每轮默认随机数：若当前轮次未触发过随机数更新，则使用随机数合约地址和轮次来生成随机数
- 随机数种子更新：达到 0.05%治理权的验证者地址验证时，上一个随机数种子加验证者地址加当前区块高度作为本轮最新的随机数种子的值
