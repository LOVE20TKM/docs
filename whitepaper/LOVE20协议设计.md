---
title: "LOVE20 协议设计"
description: "LOVE20 协议是一个基于“流动性质押获取治理权”和“可验证共识行动”的去中心化社群铸币协议。"
---

## 0. 什么是 LOVE20 协议

### 0.1. 定义

LOVE20 协议是一个基于 **流动性质押获取治理权** 和 **可验证共识行动** 的去中心化社群铸币协议。

### 0.2. 目的

LOVE20 协议的目的是帮助社群，铸造真正属于社群的代币，不依赖于任何中心化的团队与应用。

### 0.3. 场景

LOVE20 既可以务实的，作为一个完全去中心化的 Web3 版线上互助打卡社群，大家每天跑步运动、读书学习，并在社交网络打卡，接受社群的共同见证，获得铸币激励，实现个体与社群的共同成长；

同时也可以支持迷因化社群，大家用可验证的共识行动，来传播迷因文化，打造真正的去中心化的迷因社群，真正属于社群的迷因币。

更多的可能，由社群自己来探索。

### 0.4. 名字

LOVE20 中的 LOVE 代表“爱” ，是对自己的爱，对他人的爱，也是所热爱的事物的爱。希望每个人，每天做 **20 分钟** 想做的或热爱的事情，获得精神与物质上的双重富足。

LOVE20 同时也可以理解为 LOVE+ERC20，意为爱的代币化。

最终的定义，在社群的每个人的心中。

## 1. 启动公平发射

协议部署时，会自动启动一个与协议同名的 LOVE20 代币的公平发射，以 ERC20 封装后的公链原生代币为父币。

LOVE20 协议里，任何代币在公平发射结束后，可以启动以自己为父币的子币的公平发射。

启动的子币名称满足：

- 大写英文字母、数字
- 开头不可以是数字
- 必须是 6 个字符

启动子币公平发射的地址需满足：

- 在父币社群有行动推举权
- 在父币社群完成 M 次的治理铸币次数（每完成 M 次可启动一个子币公平发射）

包括最初的 LOVE20 代币本身在内，所有通过 LOVE20 协议启动的代币都预先设定了最大代币总量，并在首次启动公平发射时，会铸造 10%最大代币总量给到公平发射合约，还未铸造的 90%的最大代币总量会通过后续的社群治理与社群行动逐步铸造。

注意：开启代币公平发射的地址，不会获得任何额外代币，在后续子币的治理中，也不会有任何特殊权力预留。

## 2. 公平发射（代币总量 10%）

进入到公平发射阶段，任何人持有父币的人，都可以参与申购，获得代币的初次分配。

具体的参与方式如下：

- 参与申购
  - 价格：固定，按协议预先设定的父币募集目标数量与代币的发射量计算价格
  - 数量：不限，允许超额申购
  - 结束：每一次申购都触发判定，若下面两个条件同时满足，则结束公平发射
    - 数量判定：累计申购额大于等于父币募集目标数量
    - 时间判定：从首笔达成 50%父币募集目标数量的区块高度与当前申购的区块高度差达到协议设定的区块数
- 申购撤回
  - 时间：公平发射未结束，且在申购后等待协议设定的等待区块数后，可撤回申购
  - 返还：返还所有申购的父币
- 申购领取
  - 时间：公平发射结束后的下一个区块开始，可以领取
  - 数量：申购结束后按申购额占比计算份额
  - 返还：按价格扣除消耗的父币，返还剩余父币
- 托底池销毁：
  - 发射结束后，募集到的父币会从发射合约转到代币合约作为托底池，为代币整体市值托底。销毁代币，将返还同比例的托底池父币，比例计算为：销毁代币数量 / 已铸造代币量
- 无偿销毁：
  - 销毁的代币从当前铸造代币量中移除，转为未铸造的代币，作为未来的社群治理与行动的激励

## 3. 治理铸币（代币总量 45%）

公平发射结束后，社群将进入流水线式治理，治理的目标是通过铸币激励，引导社群积极参与可验证的共识行动，形成社群的共识。

参与治理，需要先获得治理票，并在投票阶段和验证阶段完成投票和验证后，在验证阶段铸造治理激励。后面对于持有治理票的社群成员，简称为治理者。

一轮完整的治理由 3 个相同时间长度的阶段组成：

- 投票阶段（治理者）：投票决定本轮的可验证共识行动
- 行动阶段（持币人）：报名参与本轮可验证的共识行动
- 验证阶段（治理者）：验证本轮随机抽取地址的共识行动

前后轮次刚好错开一个阶段的长度，即每轮治理的一个阶段结束后，立即当轮的下一个阶段及下一轮的同阶段，示意如下：

| 治理轮\阶段 | P(n) | P(n+1) | P(n+2) | P(n+3) | P(n+4) | P(n+5) | P(n+6) |
| ----------- | ---- | ------ | ------ | ------ | ------ | ------ | ------ |
| 第 n 轮     | 投票 | 行动   | 验证   |
| 第 n + 1 轮 |      | 投票   | 行动   | 验证   |
| 第 n + 2 轮 |      |        | 投票   | 行动   | 验证   |
| 第 n + 3 轮 |      |        |        | 投票   | 行动   | 验证   |
| 第 n + 4 轮 |      |        |        |        | 投票   | 行动   | 验证   |

注意：
绝对轮次第 0 轮保留，绝对轮次第 1 轮可以进行治理

### 3.1. 资格

- 治理票数： 通过流动性质押，即同时质押代币与父币资产对，并承诺释放等待阶段数，获得治理票数，参与投票与验证，并获取验证激励，后续可随时质押更多的资产对获得更多治理票数，质押后会获得 sl 类（staked Liquidity）代币作为质押凭证，质押的资产将自动添加到由协议部署的 uniswapV2 合约的流动性池增加流动性，治理票数计算公式：承诺释放等待阶段数 \* sl 质押凭证代币数量。

- 加速激励：通过质押代币，获得 st 类（staked Token）代币作为质押代币的凭证，参与加速激励的分配。

- 治理失效：若质押凭证缺失或不足会导致治理票数失效，无法参与治理，无法获取治理激励。

- 承诺释放等待阶段数：每次质押，都需指定承诺释放等待阶段数（有最大最小值范围），且不小于之前质押时承诺的释放等待阶段数

- 质押释放：提交质押资产（sl 资产对 和 st 资产）释放请求，并收回质押资产凭证（sl 与 st），在等待完整的承诺释放等待阶段数后，可领取质押的资产。(例如：承诺释放等待阶段数为 4，则在第 3 轮投票阶段申请质押释放后，在第 7 轮投票阶段结束后，即可领取质押资产)

- 资产数量：资产对的释放，会按照 UniswapV2 的 x\*y=k 公式，基于当前流动池内价格，计算两种资产的释放数量，两种资产的数量乘积，与质押时的数量乘积相同，即若价格与质押时相同，则与质押时的资产数相同。st 类资产释放与质押时的代币数量相同。

### 3.2. 权力

- 投票阶段

  - 行动推举：

    - 资格获取：持有不少于 0.3%的治理票
    - 推举限制：每轮只可推举一个行动
    - 推举方式

      - 推举老行动：从所有本轮未被推举的行动中，选取一个推举到本轮进行投票
      - 推举新行动：创建一个新行动并推举到本轮，行动包含的字段如下：

        - 标题：一句话描述的行动内容
        - 验证规则：详细的行动要求，例如：发推文包含“$代币名称”，满 5 天给 10 分，每少一天减 3 分，没有则 0 分
        - 最小参与量 ：不为 0 的数
        - 白名单地址：指定唯一可参与行动的地址，不填写表示不限制
        - 最大随机抽取地址数：每轮随机抽取最多多少个地址验证以使其获取行动激励资格
        - 辅助信息：报名参与行动时，需填写的一个或多个辅助信息，帮助验证者验证：例如：url
        - 辅助信息说明：报名参与行动时，需填写的辅助信息的说明：例如：社交平台个人主页地址链接

  - 行动投票：从本轮已推举出的行动中，选择 1 个或多个行动投票，每轮投票数不超过持有的治理票数

- 验证阶段
  - 验证行动情况：对随机抽取出的地址，根据报名参与行动时所填写的辅助信息，去验证，计算每个地址验证票的票数
  - 提交验证结果：提交弃权票及每个地址的验证票

### 3.3. 治理激励

治理激励 50%为验证激励，50%为加速激励，在验证阶段后铸造：

- 验证激励：根据本轮验证票占本轮所有验证票的比例进行分配
- 加速激励：质押持有 st 代币可获得加速激励，按投票时质押代币占投票的总质押代币数量的比例计算加速激励，但最多不超过 2 倍的验证激励，超出部分在铸造治理激励时销毁，留作后续轮次的激励。若所有投票验证者都没有质押代币，则本轮加速激励销毁。

## 4. 行动铸币（代币总量 45%）

任何持币人都可以通过质押代币的方式，来报名参与本轮被治理者投票支持的一个或多个行动，并有机会在验证阶段被选中，被治理者验证，并在验证阶段后，根据得到的验证票数，来铸造行动激励。

### 4.1. 资格

- 加入：在行动阶段，除阶段快结束前的最后一些区块外，随时可以加入行动
  - 追加：随时可追加代币，并当轮生效
  - 填写辅助信息：加入行动时，根据行动的辅助信息填写指引，填写行动报名所需填写的辅助信息，帮助验证者验证你的行动，例如：你的社交平台的信息流地址或个人主页地址
- 退出：取回此行动累计参与的所有代币

### 4.2. 权力

- 行动阶段

  - 参与本轮被推举并投票过的行动，根据行动的验证规则，完成行动
  - 之前轮次参与并且未退出的行动，无需重复参与

- 验证阶段
  - 每个参与的行动，将根据质押量大小，来随机抽取待验证地址，质押量越大，被抽中的概率越大

### 4.3. 激励

所获得的投票达到总投票的 3%的行动，其参与者将参与行动激励的分配，分配基于所获得的验证票的比例。

- 总激励：本轮激励的 50%
- 个体激励
  - 资格：被随机选中的待验证的地址
  - 数量：所获得的验证者投票数 \* 行动总激励 / (有激励的行动的总验证票数 - 有激励的行动的总弃权票)
- 时间：在验证阶段后，可铸造本轮行动激励

## 5. 特殊情况

### 5.1. 激励预留

- 触发时机：当轮首个验证
- 预留数量：计算并存储本轮预留的激励，计算公式：0.2%未分配激励，其中 0.1%作为治理激励、0.1%作为行动激励
- 未分配激励：最大铸币量 - 已铸币量 - 之前轮次预留的未铸造未销毁的激励

### 5.2. 销毁加速激励

- 触发时机：当轮首个铸造治理激励的地址
- 销毁条件：所有参与验证的治理者，都没有质押代币
- 销毁数量：本轮所有加速激励

### 5.3. 销毁行动激励

- 触发时机：当轮首个铸造治理激励的地址
- 销毁条件：有激励的行动的验证票都是弃权票
- 销毁数量：本轮所有行动激励

### 5.4. 验证地址准备

- 触发时机：验证、行动参与、行动退出时，验证阶段待验证的随机抽取地址若还未生成，则会触发生成。其中行动参与和行动退出时触发生成的是上一轮的验证地址
- 地址数量：不超过最大地址数，若同一个地址抽到多次会合并返回，故可能会少于最大地址数

### 5.5. 随机数更新

- 初始随机数生成：随机数合约地址加部署时的区块高度
- 每轮默认随机数：若当前轮次未触发过随机数更新，则使用随机数合约地址和轮次来生成随机数
- 随机数种子更新：首个代币的治理者，在治理验证时，验证票数达到 0.03%则会触发随机数种子更新，更新的计算方式为上一个随机数种子加验证者地址加当前区块高度作为本轮最新的随机数种子的值
- 封装方式：uint256(keccak256(abi.encode(前一个随机数种子值，验证者地址，所在区块高度)))

### 5.6. 流动性质押手续费分配

- 触发时机：每个地址取回质押资产时
- 触发条件：流动性质押产生的手续费收入，达到阈值
- 分配方式：手续费收入由两种代币构成，其中代币销毁，增加未来治理和行动激励，父币注入托底池，增大代币最低市值
